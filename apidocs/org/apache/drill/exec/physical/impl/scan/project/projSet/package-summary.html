<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_232) on Tue Dec 24 19:10:21 EET 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>org.apache.drill.exec.physical.impl.scan.project.projSet (Apache Drill Root POM 1.17.0 API)</title>
<meta name="date" content="2019-12-24">
<link rel="stylesheet" type="text/css" href="../../../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.apache.drill.exec.physical.impl.scan.project.projSet (Apache Drill Root POM 1.17.0 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/sort/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../../index.html?org/apache/drill/exec/physical/impl/scan/project/projSet/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.apache.drill.exec.physical.impl.scan.project.projSet</h1>
<div class="docSummary">
<div class="block">The dynamic projection in Drill is complex.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/TypeConverter.CustomTypeTransform.html" title="interface in org.apache.drill.exec.physical.impl.scan.project.projSet">TypeConverter.CustomTypeTransform</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/AbstractProjectionSet.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">AbstractProjectionSet</a></td>
<td class="colLast">
<div class="block">Base class for projection set implementations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/AbstractReadColProj.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">AbstractReadColProj</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/EmptyProjectionSet.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">EmptyProjectionSet</a></td>
<td class="colLast">
<div class="block">Handles simple cases in which either all columns are projected
 or no columns are projected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/ExplicitProjectionSet.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">ExplicitProjectionSet</a></td>
<td class="colLast">
<div class="block">Projection set based on an explicit set of columns provided
 in the physical plan.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/ProjectedMapColumn.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">ProjectedMapColumn</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/ProjectedReadColumn.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">ProjectedReadColumn</a></td>
<td class="colLast">
<div class="block">Projected column.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/ProjectionSetBuilder.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">ProjectionSetBuilder</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/ProjectionSetFactory.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">ProjectionSetFactory</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/TestProjectionSet.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">TestProjectionSet</a></td>
<td class="colLast">
<div class="block">Test the projection set used by the result set loader as
 columns are added.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/TypeConverter.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">TypeConverter</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/TypeConverter.Builder.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">TypeConverter.Builder</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/UnprojectedReadColumn.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">UnprojectedReadColumn</a></td>
<td class="colLast">
<div class="block">Unprojected column.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/projSet/WildcardProjectionSet.html" title="class in org.apache.drill.exec.physical.impl.scan.project.projSet">WildcardProjectionSet</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.apache.drill.exec.physical.impl.scan.project.projSet Description">Package org.apache.drill.exec.physical.impl.scan.project.projSet Description</h2>
<div class="block">The dynamic projection in Drill is complex. With the advent of
 provided schema, we now have many ways to manage projection. The
 classes here implement these many policies. They are implemented
 as distinct classes (rather than chains of if-statements) to
 make the classes easier to test and reason about.
 <p>
 Projection is a combination of three distinct policies:
 <ul>
 <li>Projection policy (all, none, explicit, etc.)</li>
 <li>Column policy (unprojected, explicit projection,
 projection with schema, etc.)</li>
 <li>Type conversion: none, based on a provided schema,
 custom.</li>
 </ul>
 Experience has shown that these must be separated: each is designed
 and tested separately to keep the problem tractable.

 <h4>Projection Set Cases</h4>

 The project cases and their classes:
 <p>
 <dl>
 <dt><code>EmptyProjectionSet</code></dt>
 <dd><tt>SELECT COUNT(*)</tt>: Project nothing. Only count records.</dd>
 <dl>
 <dt><code>WildcardProjectionSet</code></dt>
 <dd><tt>SELECT *</tt>: Project everything, with an optional provided
 schema. If a schema is provided, and is strict, then project only
 reader columns that appear in the provided schema.
 However, don't project columns which have been marked as
 special: <code>ColumnMetadata#EXCLUDE_FROM_WILDCARD</code>, whether marked
 in the reader or provided schemas.</dd>
 <dt><code>ExplicitProjectionSet</code></dt>
 <dd><tt>SELECT a, b[10], c.d</tt>: Explicit projection with or without
 a schema. Project only the selected columns. Verify that the reader
 provides column types/modes consistent with the implied form in the
 projection list. That is, in this example, `b` must be an array.</dd>
 </dl>

 <h4>Column Projection Cases</h4>

 Each projection set answers a query: "the reader wants to add such-and-so
 column: what should I do?" Since the reader is free to add any column,
 we don't cache the list of columns as is done with the parsed project
 list, or the output schema. Instead, we handle each column on a
 case-by-case basis; we create a <code>ColumnReadProjection</code> instance
 to answer the query. Instances of this class are meant to be transient:
 use them and discard them. We answer the query differently depending on
 many factors, including:
 <p>
 <dl>
 <dt><code>UnprojectedReadColumn</code></dt>
 <dd>Column is not projected. Nothing to convert, no type checks
 needed. The result set loader should create a dummy writer for this
 case.</dd>
 <dt><code>ProjectedReadColumn</code></dt>
 <dd>Column is projected. It may have an associated projection list
 item, an output schema, or a type conversion. All these variations
 should be transparent to the consumer.</dd>
 </dl>

 <h4>Type Conversion</h4>

 The <code>TypeConverter</code> class handles a provided schema, custom type
 conversion, and custom properties passed to the conversion shims. A null
 type converter passed to a projection set means no conversion is done.
 (The mechanism creates a dummy projection in this case.)

 <h4>Construction</h4>

 Two classes build the above complex cases:
 <p>
 <dl>
 <dt><code>ProjectionSetFactory</code><dt>
 <dd>Builds simple projection sets that take few parameters.</dd>
 <dt><code>ProjectionSetBuilder</code></dt>
 <dd>Handles the complex cases.</dd></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/scan/project/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../../../../../org/apache/drill/exec/physical/impl/sort/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../../index.html?org/apache/drill/exec/physical/impl/scan/project/projSet/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
